# Processing as JavaScript (P9asJ9)

P9asJ9 enables to run Processing codes in your browser.
Examples are in test directory. Many of the Processing codes are borrowed from [Processing Official Site](https://processing.org).
Notice that not all the examples run correctly, mainly because of the limitations described below.

This alpha version covers only essential functions in Processing 4, and has limitations such as

- incorrect transpile from a code with extended classes and interfaces,
- incorrect transpile from a code with multiple classes,
- incorrect transpile from a code with multiple class constructors (which is not supported in JavaScript),
- incorrect transpile from a code with multiple variables of a same name but in different scopes,
- ignorance of imports (so you will not be able to utilize external libraries), and
- occasional failure of reload.

P9asJ9 uses a parser generated by [antlr4](https://github.com/antlr/antlr4). As P9asJ9 is written in TypeScript, it uses antlr4 via [antlr4ts](https://github.com/tunnelvisionlabs/antlr4ts). The parser and lexer are maintained by myself, and you can access them at [the separate project page](https://github.com/sayakaakioka/antlr-v4-grammar-processing).

Usage is quite simple. First of all, prepare a html file containing Processing code in a script block. You can put script blocks in a html file as many as you like. In the example below, `transpiled` is set tp `debug`. In this mode, the original Processing code and the transpiled JavaScript code side by side, below the sketch. If you set `true` to `debug`, the log by the parser will be print in JavaScript console. If you need only the sketch, and just keep everything else calm, set `false` to `debug`.

```html
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>P9asJ9 usage example</title>
  </head>

  <body>
    <h1>test</h1>

    <script type="text/processing" id="test" debug="transpiled">
      void setup(){
        background(255);
      }

      void draw(){
        // do something
      }
    </script>

    <!-- P9asJ9.js should be placed in the last of the document -->
    <script type="text/javascript" src="P9asJ9.js"></script>
  </body>
</html>
```

Once prepared the html file, put `P9asJ9.js` in the same directory. For the colored fancy code display, get `hljs.css` from [highlight.js](https://highlightjs.org), and put it in the same directory as well. Now, you are set.
